ARM GAS  C:\Users\chian\AppData\Local\Temp\cc45TE1l.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"main.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.rodata
  20              		.align	2
  21              	.LC0:
  22 0000 436F6E6E 		.ascii	"Connect successful\000"
  22      65637420 
  22      73756363 
  22      65737366 
  22      756C00
  23 0013 00       		.align	2
  24              	.LC1:
  25 0014 496E2077 		.ascii	"In while\000"
  25      68696C65 
  25      00
  26              		.section	.text.main,"ax",%progbits
  27              		.align	1
  28              		.global	main
  29              		.syntax unified
  30              		.thumb
  31              		.thumb_func
  33              	main:
  34              	.LFB3:
  35              		.file 1 "./Src/main.c"
   1:./Src/main.c  **** /**
   2:./Src/main.c  ****  ******************************************************************************
   3:./Src/main.c  ****  * @file    main.c
   4:./Src/main.c  ****  * @author  Kuan-Di Jiang
   5:./Src/main.c  ****  * @brief   This file is a example
   6:./Src/main.c  ****  ******************************************************************************
   7:./Src/main.c  ****  */
   8:./Src/main.c  **** 
   9:./Src/main.c  **** #include "myusart.h"
  10:./Src/main.c  **** #include <stdio.h>
  11:./Src/main.c  **** #include <stdint.h>
  12:./Src/main.c  **** 
  13:./Src/main.c  **** /* original setting
  14:./Src/main.c  **** uint32_t *pClkCtrlreg = (uint32_t)0x40021014U; // p clock control register
  15:./Src/main.c  **** uint32_t *pPortModeReg = (uint32_t)0x48000400U;
  16:./Src/main.c  **** uint32_t *pPortOutReg = (uint32_t)0x48000414U;
  17:./Src/main.c  **** */
ARM GAS  C:\Users\chian\AppData\Local\Temp\cc45TE1l.s 			page 2


  18:./Src/main.c  **** // using define to make code clean
  19:./Src/main.c  **** #define RCC_AHBENR *(volatile uint32_t *)(0x40021014U)	// AHB peripheral clock enable register, 0x4
  20:./Src/main.c  **** #define GPIOB_MODER *(volatile uint32_t *)(0x48000400U) // GPIOB base address + 0x00(offset)
  21:./Src/main.c  **** #define GPIOB_ODR *(volatile uint32_t *)(0x48000414U)	// GPIOB base address + 0x14(offset)
  22:./Src/main.c  **** 
  23:./Src/main.c  **** int main(void)
  24:./Src/main.c  **** {
  36              		.loc 1 24 1
  37              		.cfi_startproc
  38              		@ args = 0, pretend = 0, frame = 0
  39              		@ frame_needed = 1, uses_anonymous_args = 0
  40 0000 80B5     		push	{r7, lr}
  41              	.LCFI0:
  42              		.cfi_def_cfa_offset 8
  43              		.cfi_offset 7, -8
  44              		.cfi_offset 14, -4
  45 0002 00AF     		add	r7, sp, #0
  46              	.LCFI1:
  47              		.cfi_def_cfa_register 7
  25:./Src/main.c  **** 	MYUSART_Init();
  48              		.loc 1 25 2
  49 0004 FFF7FEFF 		bl	MYUSART_Init
  26:./Src/main.c  **** 	printf("Connect successful\n"); // needed slash n
  50              		.loc 1 26 2
  51 0008 0F48     		ldr	r0, .L3
  52 000a FFF7FEFF 		bl	puts
  27:./Src/main.c  **** 	/** Control LED
  28:./Src/main.c  **** 	 *	Address of the clock control register (AHB2)
  29:./Src/main.c  **** 	 *  0x40021000(RCC base address) + 0x14(offset)
  30:./Src/main.c  **** 	 *  = 0x40021014
  31:./Src/main.c  **** 	 *  Address of the GPIOB mode register (used to control mode)
  32:./Src/main.c  **** 	 *  0x48000400(GPIOB base address) + 0x00(offset)
  33:./Src/main.c  **** 	 *  0x48000400
  34:./Src/main.c  **** 	 *
  35:./Src/main.c  **** 	 * Address of the GPIOB output data register (used to write)
  36:./Src/main.c  **** 	 * 0x48000400(GPIOB base address) + 0x14(offset)
  37:./Src/main.c  **** 	 * 0x48000414
  38:./Src/main.c  **** 	 *
  39:./Src/main.c  **** 	 */
  40:./Src/main.c  **** 
  41:./Src/main.c  **** 	// select uint32_t because all peripheral register are of 32 bits.
  42:./Src/main.c  **** 
  43:./Src/main.c  **** 	// 1. enable the clock for GPIOB peripheral in the AHB2
  44:./Src/main.c  **** 	RCC_AHBENR |= (1 << 18); // means	0x00040000U, set IOPB EN to 1(datasheet)
  53              		.loc 1 44 13
  54 000e 0F4B     		ldr	r3, .L3+4
  55 0010 1B68     		ldr	r3, [r3]
  56 0012 0E4A     		ldr	r2, .L3+4
  57 0014 43F48023 		orr	r3, r3, #262144
  58 0018 1360     		str	r3, [r2]
  45:./Src/main.c  **** 
  46:./Src/main.c  **** 	// 2. configure the mode of the IO pin as output
  47:./Src/main.c  **** 	// The LED is on pin7 -> confirm 14th -> 1, 15th -> 0
  48:./Src/main.c  **** 	// a. clear the 14th and 15th bit positions (CLEAR)
  49:./Src/main.c  **** 	GPIOB_MODER &= (3 << 14); // means 0xFFFF3FFFU, set 14th and 15th to 0 (datasheet)
  59              		.loc 1 49 14
  60 001a 0D4B     		ldr	r3, .L3+8
ARM GAS  C:\Users\chian\AppData\Local\Temp\cc45TE1l.s 			page 3


  61 001c 1B68     		ldr	r3, [r3]
  62 001e 0C4A     		ldr	r2, .L3+8
  63 0020 03F44043 		and	r3, r3, #49152
  64 0024 1360     		str	r3, [r2]
  50:./Src/main.c  **** 							  // 3 means 11 in binary
  51:./Src/main.c  **** 	// b make 14th bit position as 1 (SET)
  52:./Src/main.c  **** 	GPIOB_MODER |= (1 << 14); // means 0x00004000U, set 14th to 1 (datasheet)
  65              		.loc 1 52 14
  66 0026 0A4B     		ldr	r3, .L3+8
  67 0028 1B68     		ldr	r3, [r3]
  68 002a 094A     		ldr	r2, .L3+8
  69 002c 43F48043 		orr	r3, r3, #16384
  70 0030 1360     		str	r3, [r2]
  53:./Src/main.c  **** 
  54:./Src/main.c  **** 	// 3. SET 7th bit of the output data register to make I/O pin-7 HIGH
  55:./Src/main.c  **** 	GPIOB_ODR |= (1 << 7); // means 0x0080
  71              		.loc 1 55 12
  72 0032 084B     		ldr	r3, .L3+12
  73 0034 1B68     		ldr	r3, [r3]
  74 0036 074A     		ldr	r2, .L3+12
  75 0038 43F08003 		orr	r3, r3, #128
  76 003c 1360     		str	r3, [r2]
  77              	.L2:
  56:./Src/main.c  **** 	while (1)
  57:./Src/main.c  **** 	{
  58:./Src/main.c  **** 		printf("In while\n");
  78              		.loc 1 58 3 discriminator 1
  79 003e 0648     		ldr	r0, .L3+16
  80 0040 FFF7FEFF 		bl	puts
  81 0044 FBE7     		b	.L2
  82              	.L4:
  83 0046 00BF     		.align	2
  84              	.L3:
  85 0048 00000000 		.word	.LC0
  86 004c 14100240 		.word	1073877012
  87 0050 00040048 		.word	1207960576
  88 0054 14040048 		.word	1207960596
  89 0058 14000000 		.word	.LC1
  90              		.cfi_endproc
  91              	.LFE3:
  93              		.text
  94              	.Letext0:
  95              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
  96              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
ARM GAS  C:\Users\chian\AppData\Local\Temp\cc45TE1l.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\chian\AppData\Local\Temp\cc45TE1l.s:20     .rodata:00000000 $d
C:\Users\chian\AppData\Local\Temp\cc45TE1l.s:27     .text.main:00000000 $t
C:\Users\chian\AppData\Local\Temp\cc45TE1l.s:33     .text.main:00000000 main
C:\Users\chian\AppData\Local\Temp\cc45TE1l.s:85     .text.main:00000048 $d

UNDEFINED SYMBOLS
MYUSART_Init
puts
