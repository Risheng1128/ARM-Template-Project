ARM GAS  C:\Users\chian\AppData\Local\Temp\cc1p1upN.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"main.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.rodata
  20              		.align	2
  21              	.LC0:
  22 0000 436F6E6E 		.ascii	"Connect successful\000"
  22      65637420 
  22      73756363 
  22      65737366 
  22      756C00
  23 0013 00       		.align	2
  24              	.LC1:
  25 0014 496E2077 		.ascii	"In while\000"
  25      68696C65 
  25      00
  26              		.section	.text.main,"ax",%progbits
  27              		.align	1
  28              		.global	main
  29              		.syntax unified
  30              		.thumb
  31              		.thumb_func
  33              	main:
  34              	.LFB3:
  35              		.file 1 "./Src/main.c"
   1:./Src/main.c  **** /**
   2:./Src/main.c  ****  ******************************************************************************
   3:./Src/main.c  ****  * @file    main.c
   4:./Src/main.c  ****  * @author  Kuan-Di Jiang
   5:./Src/main.c  ****  * @brief   This file is a example
   6:./Src/main.c  ****  ******************************************************************************
   7:./Src/main.c  ****  */
   8:./Src/main.c  **** 
   9:./Src/main.c  **** #include "myusart.h"
  10:./Src/main.c  **** #include <stdio.h>
  11:./Src/main.c  **** #include <stdint.h>
  12:./Src/main.c  **** 
  13:./Src/main.c  **** int main(void)
  14:./Src/main.c  **** {
  36              		.loc 1 14 1
  37              		.cfi_startproc
  38              		@ args = 0, pretend = 0, frame = 16
ARM GAS  C:\Users\chian\AppData\Local\Temp\cc1p1upN.s 			page 2


  39              		@ frame_needed = 1, uses_anonymous_args = 0
  40 0000 80B5     		push	{r7, lr}
  41              	.LCFI0:
  42              		.cfi_def_cfa_offset 8
  43              		.cfi_offset 7, -8
  44              		.cfi_offset 14, -4
  45 0002 84B0     		sub	sp, sp, #16
  46              	.LCFI1:
  47              		.cfi_def_cfa_offset 24
  48 0004 00AF     		add	r7, sp, #0
  49              	.LCFI2:
  50              		.cfi_def_cfa_register 7
  15:./Src/main.c  **** 	MYUSART_Init();
  51              		.loc 1 15 2
  52 0006 FFF7FEFF 		bl	MYUSART_Init
  16:./Src/main.c  **** 	printf("Connect successful\n"); // needed slash n
  53              		.loc 1 16 2
  54 000a 1248     		ldr	r0, .L3
  55 000c FFF7FEFF 		bl	puts
  17:./Src/main.c  **** 	/** Control LED
  18:./Src/main.c  **** 	 *	Address of the clock control register (AHB2)
  19:./Src/main.c  **** 	 *  0x40021000(RCC base address) + 0x14(offset)
  20:./Src/main.c  **** 	 *  = 0x40021014
  21:./Src/main.c  **** 	 *  Address of the GPIOB mode register (used to control mode)
  22:./Src/main.c  **** 	 *  0x48000400(GPIOB base address) + 0x00(offset)
  23:./Src/main.c  **** 	 *  0x48000400
  24:./Src/main.c  **** 	 *
  25:./Src/main.c  **** 	 * Address of the GPIOB output data register (used to write)
  26:./Src/main.c  **** 	 * 0x48000400(GPIOB base address) + 0x14(offset)
  27:./Src/main.c  **** 	 * 0x48000414
  28:./Src/main.c  **** 	 *
  29:./Src/main.c  **** 	 */
  30:./Src/main.c  **** 
  31:./Src/main.c  **** 	// select uint32_t because all peripheral register are of 32 bits.
  32:./Src/main.c  **** 	uint32_t *pClkCtrlreg = (uint32_t)0x40021014U; // p clock control register
  56              		.loc 1 32 12
  57 0010 114B     		ldr	r3, .L3+4
  58 0012 FB60     		str	r3, [r7, #12]
  33:./Src/main.c  **** 	uint32_t *pPortModeReg = (uint32_t)0x48000400U;
  59              		.loc 1 33 12
  60 0014 114B     		ldr	r3, .L3+8
  61 0016 BB60     		str	r3, [r7, #8]
  34:./Src/main.c  **** 	uint32_t *pPortOutReg = (uint32_t)0x48000414U;
  62              		.loc 1 34 12
  63 0018 114B     		ldr	r3, .L3+12
  64 001a 7B60     		str	r3, [r7, #4]
  35:./Src/main.c  **** 	// 1. enable the clock for GPIOB peripheral in the AHB2
  36:./Src/main.c  **** 	*pClkCtrlreg |= 0x00040000U; // set IOPB EN to 1(datasheet)
  65              		.loc 1 36 15
  66 001c FB68     		ldr	r3, [r7, #12]
  67 001e 1B68     		ldr	r3, [r3]
  68 0020 43F48022 		orr	r2, r3, #262144
  69 0024 FB68     		ldr	r3, [r7, #12]
  70 0026 1A60     		str	r2, [r3]
  37:./Src/main.c  **** 
  38:./Src/main.c  **** 	// 2. configure the mode of the IO pin as output
  39:./Src/main.c  **** 	// The LED is on pin7 -> confirm 14th -> 1, 15th -> 0
ARM GAS  C:\Users\chian\AppData\Local\Temp\cc1p1upN.s 			page 3


  40:./Src/main.c  **** 	// a. clear the 14th and 15th bit positions (CLEAR)
  41:./Src/main.c  **** 	*pPortModeReg &= 0xFFFF3FFFU; // set 14th and 15th to 0 (datasheet)
  71              		.loc 1 41 16
  72 0028 BB68     		ldr	r3, [r7, #8]
  73 002a 1B68     		ldr	r3, [r3]
  74 002c 23F44042 		bic	r2, r3, #49152
  75 0030 BB68     		ldr	r3, [r7, #8]
  76 0032 1A60     		str	r2, [r3]
  42:./Src/main.c  **** 	// b make 14th bit position as 1 (SET)
  43:./Src/main.c  **** 	*pPortModeReg |= 0x00004000U; // set 14th to 1 (datasheet)
  77              		.loc 1 43 16
  78 0034 BB68     		ldr	r3, [r7, #8]
  79 0036 1B68     		ldr	r3, [r3]
  80 0038 43F48042 		orr	r2, r3, #16384
  81 003c BB68     		ldr	r3, [r7, #8]
  82 003e 1A60     		str	r2, [r3]
  44:./Src/main.c  **** 
  45:./Src/main.c  **** 	// 3. SET 7th bit of the output data register to make I/O pin-7 HIGH
  46:./Src/main.c  **** 	*pPortOutReg |= 1 << 7; // 0x0080
  83              		.loc 1 46 15
  84 0040 7B68     		ldr	r3, [r7, #4]
  85 0042 1B68     		ldr	r3, [r3]
  86 0044 43F08002 		orr	r2, r3, #128
  87 0048 7B68     		ldr	r3, [r7, #4]
  88 004a 1A60     		str	r2, [r3]
  89              	.L2:
  47:./Src/main.c  **** 	while (1)
  48:./Src/main.c  **** 	{
  49:./Src/main.c  **** 		printf("In while\n");
  90              		.loc 1 49 3 discriminator 1
  91 004c 0548     		ldr	r0, .L3+16
  92 004e FFF7FEFF 		bl	puts
  93 0052 FBE7     		b	.L2
  94              	.L4:
  95              		.align	2
  96              	.L3:
  97 0054 00000000 		.word	.LC0
  98 0058 14100240 		.word	1073877012
  99 005c 00040048 		.word	1207960576
 100 0060 14040048 		.word	1207960596
 101 0064 14000000 		.word	.LC1
 102              		.cfi_endproc
 103              	.LFE3:
 105              		.text
 106              	.Letext0:
 107              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 108              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
ARM GAS  C:\Users\chian\AppData\Local\Temp\cc1p1upN.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\chian\AppData\Local\Temp\cc1p1upN.s:20     .rodata:00000000 $d
C:\Users\chian\AppData\Local\Temp\cc1p1upN.s:27     .text.main:00000000 $t
C:\Users\chian\AppData\Local\Temp\cc1p1upN.s:33     .text.main:00000000 main
C:\Users\chian\AppData\Local\Temp\cc1p1upN.s:97     .text.main:00000054 $d

UNDEFINED SYMBOLS
MYUSART_Init
puts
